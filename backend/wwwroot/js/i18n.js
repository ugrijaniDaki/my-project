// Aura Fine Dining - Internationalization (i18n)
const translations = {
  hr: {
    // Navigation
    home: 'Poƒçetna',
    menu: 'Menu',
    reservation: 'Rezervacija',
    contact: 'Kontakt',
    back: 'Povratak',
    backHome: '‚Üê Natrag',

    // Home
    season: 'Zagreb ‚Äî Sezona 2026',
    season2026: 'Sezona 2026.',
    heroTitle: 'Okusi ti≈°ine.',
    ctaButton: 'Rezervirajte svoj stol',
    philosophy: 'Filozofija',
    philosophyTitle: 'Minimalizam na tanjuru, <br>maksimalizam u okusu.',
    philosophyText: 'Aura nije samo restoran, veƒá putovanje kroz osjetila. Svaka namirnica u sezoni 2026. pa≈æljivo je odabrana s lokalnih OPG-ova, tretirana s po≈°tovanjem i pretvorena u umjetnost.',
    exploreStory: 'Istra≈æite na≈°u priƒçu',
    quote: '"Hrana koja priƒça priƒçu o zemlji, moru i ljudima."',
    joinUs: 'Pridru≈æite nam se',
    secureSpot: 'Osigurajte termin',
    address: 'Trg Kralja Tomislava 1, Zagreb',
    hours: 'Utorak - Subota, 18:00 - 00:00',
    copyright: '¬© 2026 Aura Fine Dining. Sva prava pridr≈æana.',

    // Menu page
    menuTitle: 'Degustacijski Menu',
    menuSubtitle: 'Sedam sljedova koji slave lokalnu zemlju, more i tradiciju. Svaki tanjur priƒça svoju priƒçu kroz pa≈æljivo odabrane namirnice.',
    deliveryAvailable: 'Dostava dostupna',
    orderFavorites: 'Naruƒçite svoja omiljena jela',
    starters: 'Predjela',
    mainCourses: 'Glavna jela',
    desserts: 'Deserti',
    drinks: 'Piƒáa',
    addToCart: 'Dodaj',
    added: 'Dodano',
    cart: 'Ko≈°arica',
    yourOrder: 'Va≈°a narud≈æba',
    emptyCart: 'Ko≈°arica je prazna',
    items: 'artikala',
    total: 'Ukupno',
    continueToOrder: 'Nastavi na narud≈æbu',
    orderDelivery: 'Naruƒçi dostavu',
    loading: 'Uƒçitavanje...',
    loadingMenu: 'Uƒçitavanje menija...',
    menuLoadError: 'Gre≈°ka pri uƒçitavanju menija',

    // Checkout/Delivery
    checkoutTitle: 'Dostava',
    deliveryData: 'Unesite podatke za dostavu',
    firstName: 'Ime',
    lastName: 'Prezime',
    deliveryAddress: 'Adresa dostave',
    noteOptional: 'Napomena (opcionalno)',
    confirmOrder: 'Potvrdi narud≈æbu',
    orderSuccess: 'Hvala vam!',
    orderSuccessMsg: 'Va≈°a narud≈æba je uspje≈°no zaprimljena.<br>Uskoro ƒáemo vas kontaktirati.',
    ok: 'U redu',
    connectionError: 'Gre≈°ka pri povezivanju',

    // Reservation page
    reservationTitle: 'Rezervacija',
    selectDate: 'Odaberite datum',
    availableSlots: 'Dostupni termini',
    loadingSlots: 'Uƒçitavam termine...',
    noSlots: 'Nema dostupnih termina',
    guests: 'Broj gostiju',
    specialRequests: 'Posebni zahtjevi (opcionalno)',
    specialRequestsHint: 'Alergije, posebne prigode...',
    pricePerPerson: 'Cijena po osobi',
    totalPrice: 'Ukupno',
    selectSlot: 'Odaberite termin',
    confirmReservation: 'Potvrdi rezervaciju',
    sending: '≈†aljem...',
    available: 'Dostupno',
    limited: 'Ograniƒçeno',
    full: 'Popunjeno',
    closed: 'Zatvoreno',
    free: 'Slobodno',
    workingHours: 'Radno vrijeme',
    closedReason: 'Restoran ne radi ovaj dan',
    reservationSuccess: 'Uspje≈°no',
    backToHome: 'Natrag na poƒçetnu',
    confirmationSent: 'Potvrda je poslana na',
    person: 'osobu',
    persons234: 'osobe',
    persons5plus: 'osoba',
    date: 'Datum',
    time: 'Termin',

    // Auth
    login: 'Prijava',
    register: 'Registracija',
    loginSubtitle: 'Prijavite se za nastavak',
    registerSubtitle: 'Kreirajte raƒçun za rezervacije',
    email: 'Email adresa',
    password: 'Lozinka',
    fullName: 'Ime i prezime',
    phone: 'Telefon',
    passwordHint: 'Lozinka (min 6 znakova)',
    registerBtn: 'Registriraj se',
    loginBtn: 'Prijavi se',
    noAccount: 'Nemate raƒçun?',
    hasAccount: 'Imate raƒçun?',
    registerLink: 'Registrirajte se',
    loginLink: 'Prijavite se',
    loginError: 'Gre≈°ka pri prijavi',
    registerError: 'Gre≈°ka pri registraciji',
    serverError: 'Gre≈°ka pri povezivanju sa serverom',

    // Contact page
    contactTitle: 'Stupimo u kontakt.',
    contactSubtitle: 'Bilo da se radi o privatnom dogaƒëaju, posebnim prehrambenim zahtjevima ili medijskim upitima, na≈° tim vam stoji na raspolaganju.',
    addressLabel: 'Adresa',
    contactLabel: 'Kontakt',
    workingHoursLabel: 'Radno vrijeme',
    wednesdaySunday: 'Srijeda ‚Äî Nedjelja',
    sendMessage: 'Po≈°alji poruku',
    message: 'Poruka',
    howCanWeHelp: 'Kako vam mo≈æemo pomoƒái?',

    // Days
    mon: 'Pon', tue: 'Uto', wed: 'Sri', thu: 'ƒået', fri: 'Pet', sat: 'Sub', sun: 'Ned',

    // Months
    january: 'Sijeƒçanj', february: 'Veljaƒça', march: 'O≈æujak', april: 'Travanj',
    may: 'Svibanj', june: 'Lipanj', july: 'Srpanj', august: 'Kolovoz',
    september: 'Rujan', october: 'Listopad', november: 'Studeni', december: 'Prosinac'
  },
  en: {
    // Navigation
    home: 'Home',
    menu: 'Menu',
    reservation: 'Reservation',
    contact: 'Contact',
    back: 'Back',
    backHome: '‚Üê Back',

    // Home
    season: 'Zagreb ‚Äî Season 2026',
    season2026: 'Season 2026',
    heroTitle: 'Taste the silence.',
    ctaButton: 'Reserve your table',
    philosophy: 'Philosophy',
    philosophyTitle: 'Minimalism on the plate, <br>maximalism in taste.',
    philosophyText: 'Aura is not just a restaurant, but a journey through the senses. Every ingredient in the 2026 season is carefully selected from local farms, treated with respect and transformed into art.',
    exploreStory: 'Explore our story',
    quote: '"Food that tells a story of land, sea and people."',
    joinUs: 'Join us',
    secureSpot: 'Secure your spot',
    address: 'King Tomislav Square 1, Zagreb',
    hours: 'Tuesday - Saturday, 6:00 PM - 12:00 AM',
    copyright: '¬© 2026 Aura Fine Dining. All rights reserved.',

    // Menu page
    menuTitle: 'Tasting Menu',
    menuSubtitle: 'Seven courses celebrating local land, sea and tradition. Each plate tells its story through carefully selected ingredients.',
    deliveryAvailable: 'Delivery available',
    orderFavorites: 'Order your favorite dishes',
    starters: 'Starters',
    mainCourses: 'Main courses',
    desserts: 'Desserts',
    drinks: 'Drinks',
    addToCart: 'Add',
    added: 'Added',
    cart: 'Cart',
    yourOrder: 'Your order',
    emptyCart: 'Cart is empty',
    items: 'items',
    total: 'Total',
    continueToOrder: 'Continue to order',
    orderDelivery: 'Order delivery',
    loading: 'Loading...',
    loadingMenu: 'Loading menu...',
    menuLoadError: 'Error loading menu',

    // Checkout/Delivery
    checkoutTitle: 'Delivery',
    deliveryData: 'Enter delivery details',
    firstName: 'First name',
    lastName: 'Last name',
    deliveryAddress: 'Delivery address',
    noteOptional: 'Note (optional)',
    confirmOrder: 'Confirm order',
    orderSuccess: 'Thank you!',
    orderSuccessMsg: 'Your order has been successfully received.<br>We will contact you soon.',
    ok: 'OK',
    connectionError: 'Connection error',

    // Reservation page
    reservationTitle: 'Reservation',
    selectDate: 'Select date',
    availableSlots: 'Available time slots',
    loadingSlots: 'Loading time slots...',
    noSlots: 'No available time slots',
    guests: 'Number of guests',
    specialRequests: 'Special requests (optional)',
    specialRequestsHint: 'Allergies, special occasions...',
    pricePerPerson: 'Price per person',
    totalPrice: 'Total',
    selectSlot: 'Select time slot',
    confirmReservation: 'Confirm reservation',
    sending: 'Sending...',
    available: 'Available',
    limited: 'Limited',
    full: 'Full',
    closed: 'Closed',
    free: 'Free',
    workingHours: 'Working hours',
    closedReason: 'Restaurant is closed this day',
    reservationSuccess: 'Success',
    backToHome: 'Back to home',
    confirmationSent: 'Confirmation sent to',
    person: 'person',
    persons234: 'persons',
    persons5plus: 'persons',
    date: 'Date',
    time: 'Time',

    // Auth
    login: 'Login',
    register: 'Register',
    loginSubtitle: 'Log in to continue',
    registerSubtitle: 'Create an account for reservations',
    email: 'Email address',
    password: 'Password',
    fullName: 'Full name',
    phone: 'Phone',
    passwordHint: 'Password (min 6 characters)',
    registerBtn: 'Register',
    loginBtn: 'Log in',
    noAccount: "Don't have an account?",
    hasAccount: 'Already have an account?',
    registerLink: 'Register',
    loginLink: 'Log in',
    loginError: 'Login error',
    registerError: 'Registration error',
    serverError: 'Server connection error',

    // Contact page
    contactTitle: 'Get in touch.',
    contactSubtitle: 'Whether it\'s a private event, special dietary requirements or media inquiries, our team is at your service.',
    addressLabel: 'Address',
    contactLabel: 'Contact',
    workingHoursLabel: 'Working hours',
    wednesdaySunday: 'Wednesday ‚Äî Sunday',
    sendMessage: 'Send message',
    message: 'Message',
    howCanWeHelp: 'How can we help you?',

    // Days
    mon: 'Mon', tue: 'Tue', wed: 'Wed', thu: 'Thu', fri: 'Fri', sat: 'Sat', sun: 'Sun',

    // Months
    january: 'January', february: 'February', march: 'March', april: 'April',
    may: 'May', june: 'June', july: 'July', august: 'August',
    september: 'September', october: 'October', november: 'November', december: 'December'
  },
  de: {
    // Navigation
    home: 'Startseite',
    menu: 'Speisekarte',
    reservation: 'Reservierung',
    contact: 'Kontakt',
    back: 'Zur√ºck',
    backHome: '‚Üê Zur√ºck',

    // Home
    season: 'Zagreb ‚Äî Saison 2026',
    season2026: 'Saison 2026',
    heroTitle: 'Schmecke die Stille.',
    ctaButton: 'Reservieren Sie Ihren Tisch',
    philosophy: 'Philosophie',
    philosophyTitle: 'Minimalismus auf dem Teller, <br>Maximalismus im Geschmack.',
    philosophyText: 'Aura ist nicht nur ein Restaurant, sondern eine Reise durch die Sinne. Jede Zutat der Saison 2026 wird sorgf√§ltig von lokalen Bauernh√∂fen ausgew√§hlt, mit Respekt behandelt und in Kunst verwandelt.',
    exploreStory: 'Entdecken Sie unsere Geschichte',
    quote: '"Essen, das eine Geschichte von Land, Meer und Menschen erz√§hlt."',
    joinUs: 'Besuchen Sie uns',
    secureSpot: 'Sichern Sie sich Ihren Platz',
    address: 'K√∂nig-Tomislav-Platz 1, Zagreb',
    hours: 'Dienstag - Samstag, 18:00 - 00:00',
    copyright: '¬© 2026 Aura Fine Dining. Alle Rechte vorbehalten.',

    // Menu page
    menuTitle: 'Degustationsmen√º',
    menuSubtitle: 'Sieben G√§nge, die Land, Meer und Tradition feiern. Jeder Teller erz√§hlt seine Geschichte durch sorgf√§ltig ausgew√§hlte Zutaten.',
    deliveryAvailable: 'Lieferung verf√ºgbar',
    orderFavorites: 'Bestellen Sie Ihre Lieblingsgerichte',
    starters: 'Vorspeisen',
    mainCourses: 'Hauptgerichte',
    desserts: 'Desserts',
    drinks: 'Getr√§nke',
    addToCart: 'Hinzuf√ºgen',
    added: 'Hinzugef√ºgt',
    cart: 'Warenkorb',
    yourOrder: 'Ihre Bestellung',
    emptyCart: 'Warenkorb ist leer',
    items: 'Artikel',
    total: 'Gesamt',
    continueToOrder: 'Weiter zur Bestellung',
    orderDelivery: 'Lieferung bestellen',
    loading: 'Wird geladen...',
    loadingMenu: 'Speisekarte wird geladen...',
    menuLoadError: 'Fehler beim Laden der Speisekarte',

    // Checkout/Delivery
    checkoutTitle: 'Lieferung',
    deliveryData: 'Lieferdaten eingeben',
    firstName: 'Vorname',
    lastName: 'Nachname',
    deliveryAddress: 'Lieferadresse',
    noteOptional: 'Anmerkung (optional)',
    confirmOrder: 'Bestellung best√§tigen',
    orderSuccess: 'Vielen Dank!',
    orderSuccessMsg: 'Ihre Bestellung wurde erfolgreich aufgenommen.<br>Wir werden uns bald bei Ihnen melden.',
    ok: 'OK',
    connectionError: 'Verbindungsfehler',

    // Reservation page
    reservationTitle: 'Reservierung',
    selectDate: 'Datum w√§hlen',
    availableSlots: 'Verf√ºgbare Termine',
    loadingSlots: 'Termine werden geladen...',
    noSlots: 'Keine verf√ºgbaren Termine',
    guests: 'Anzahl der G√§ste',
    specialRequests: 'Besondere W√ºnsche (optional)',
    specialRequestsHint: 'Allergien, besondere Anl√§sse...',
    pricePerPerson: 'Preis pro Person',
    totalPrice: 'Gesamt',
    selectSlot: 'Termin w√§hlen',
    confirmReservation: 'Reservierung best√§tigen',
    sending: 'Wird gesendet...',
    available: 'Verf√ºgbar',
    limited: 'Begrenzt',
    full: 'Voll',
    closed: 'Geschlossen',
    free: 'Frei',
    workingHours: '√ñffnungszeiten',
    closedReason: 'Restaurant ist an diesem Tag geschlossen',
    reservationSuccess: 'Erfolgreich',
    backToHome: 'Zur√ºck zur Startseite',
    confirmationSent: 'Best√§tigung gesendet an',
    person: 'Person',
    persons234: 'Personen',
    persons5plus: 'Personen',
    date: 'Datum',
    time: 'Uhrzeit',

    // Auth
    login: 'Anmelden',
    register: 'Registrieren',
    loginSubtitle: 'Melden Sie sich an, um fortzufahren',
    registerSubtitle: 'Erstellen Sie ein Konto f√ºr Reservierungen',
    email: 'E-Mail-Adresse',
    password: 'Passwort',
    fullName: 'Vollst√§ndiger Name',
    phone: 'Telefon',
    passwordHint: 'Passwort (mind. 6 Zeichen)',
    registerBtn: 'Registrieren',
    loginBtn: 'Anmelden',
    noAccount: 'Noch kein Konto?',
    hasAccount: 'Bereits ein Konto?',
    registerLink: 'Registrieren',
    loginLink: 'Anmelden',
    loginError: 'Anmeldefehler',
    registerError: 'Registrierungsfehler',
    serverError: 'Serververbindungsfehler',

    // Contact page
    contactTitle: 'Kontaktieren Sie uns.',
    contactSubtitle: 'Ob private Veranstaltung, besondere Ern√§hrungsanforderungen oder Medienanfragen ‚Äì unser Team steht Ihnen zur Verf√ºgung.',
    addressLabel: 'Adresse',
    contactLabel: 'Kontakt',
    workingHoursLabel: '√ñffnungszeiten',
    wednesdaySunday: 'Mittwoch ‚Äî Sonntag',
    sendMessage: 'Nachricht senden',
    message: 'Nachricht',
    howCanWeHelp: 'Wie k√∂nnen wir Ihnen helfen?',

    // Days
    mon: 'Mo', tue: 'Di', wed: 'Mi', thu: 'Do', fri: 'Fr', sat: 'Sa', sun: 'So',

    // Months
    january: 'Januar', february: 'Februar', march: 'M√§rz', april: 'April',
    may: 'Mai', june: 'Juni', july: 'Juli', august: 'August',
    september: 'September', october: 'Oktober', november: 'November', december: 'Dezember'
  }
};

// i18n Manager
const i18n = {
  currentLang: 'hr',

  init() {
    // Check localStorage first
    const saved = localStorage.getItem('aura_language');
    if (saved && translations[saved]) {
      this.currentLang = saved;
    } else {
      // Detect from browser
      const browserLang = navigator.language.split('-')[0].toLowerCase();
      if (browserLang === 'hr' || browserLang === 'bs' || browserLang === 'sr') {
        this.currentLang = 'hr';
      } else if (browserLang === 'de' || browserLang === 'at' || browserLang === 'ch') {
        this.currentLang = 'de';
      } else {
        this.currentLang = 'en';
      }
    }

    this.createLanguageSelector();
    this.updatePage();
  },

  setLanguage(lang) {
    if (translations[lang]) {
      this.currentLang = lang;
      localStorage.setItem('aura_language', lang);
      this.updatePage();
    }
  },

  t(key) {
    return translations[this.currentLang][key] || translations['hr'][key] || key;
  },

  updatePage() {
    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      const translation = this.t(key);
      if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
        el.placeholder = translation;
      } else {
        el.innerHTML = translation;
      }
    });

    // Update HTML lang attribute
    document.documentElement.lang = this.currentLang;

    // Update language selector visual state
    document.querySelectorAll('.lang-btn').forEach(btn => {
      const isActive = btn.dataset.lang === this.currentLang;
      btn.classList.toggle('bg-stone-900', isActive);
      btn.classList.toggle('scale-110', isActive);
    });
  },

  createLanguageSelector() {
    // Only show language selector on homepage (index.html or root)
    const path = window.location.pathname;
    const isHomepage = path === '/' || path === '/index.html' || path.endsWith('/index.html');
    if (!isHomepage) return;

    // Find or create language selector container
    let selector = document.getElementById('language-selector');
    if (!selector) {
      selector = document.createElement('div');
      selector.id = 'language-selector';
      selector.className = 'fixed bottom-6 right-6 z-[100] flex gap-2 bg-white/90 backdrop-blur-md p-1.5 rounded-full shadow-lg';
      document.body.appendChild(selector);
    }

    selector.innerHTML = `
      <button class="lang-btn w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all" data-lang="hr" onclick="i18n.setLanguage('hr')">üá≠üá∑</button>
      <button class="lang-btn w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all" data-lang="en" onclick="i18n.setLanguage('en')">üá¨üáß</button>
      <button class="lang-btn w-8 h-8 rounded-full flex items-center justify-center text-lg transition-all" data-lang="de" onclick="i18n.setLanguage('de')">üá©üá™</button>
    `;
  }
};

// Initialize on DOM ready
document.addEventListener('DOMContentLoaded', () => i18n.init());
